<html>
<head>
<title>Get Started</title>
<meta name="url" content="get-started-new" />
<meta name="save_as" content="get-started-new.html" />
<meta name="order" content="4" />
<meta name="show_as_selected" content="get-started-new" />
<meta name="show_in_top_menu" content="false" />
<meta name="table_of_contents" content="true" />
</head>
<body>
    
  <p>
    You can access Buddycloud in many ways. The following steps quickly introduce you on how to exchange posts in a channel node, which is the most basic thing you can do with Buddycloud.
  </p>
  <p>
    This example uses Javascript (better suited for web apps) but you can use our <a href="https://demo.buddycloud.org/api">RESTful API</a> in order to build other apps such as mobile ones.
  </p>

  <h2>Register an account</h2>
  <span>As of now, you can only register new accounts through the <a href="https://demo.buddycloud.org/api">RESTful API</a>.</span>
  <span>Use the <kbd>/account</kbd> endpoint for account creation.</span>
  <ul class="nav nav-tabs">
      <li class="active">
          <a data-toggle="tab" href="#register_curl">cURL</a>
      </li>
      <li>
          <a data-toggle="tab" href="#register_js">Javascript</a>
      </li>
  </ul>
  <div class="tab-content">
      <div class="tab-pane fade in active" id="register_curl">
          <div class="bs-example">
            <p>
              The following cURL command issues a POST request to our RESTful API in order to create an account.
            </p>
          </div>
          <div class="highlight">
            <pre>
              <code class="curl">
        curl https://demo.buddycloud.org/api/account \
            -X POST \
            -d '{ \
              "username": "<span class='generated-u'></span>", \
              "password": "<span class='generated-p'></span>", \
              "email": "my-email@email.com" \
            }'
              </code>
            </pre>
          </div>
      </div>
      <div class="tab-pane fade in" id="register_js">
          <div class="bs-example">
            <p>
              The following Javascript code snippet issues a POST request to our RESTful API in order to create an account.
            </p>
          </div>
          <div class="highlight">
            <pre>
              <code class="javascript">
        $.ajax({
            type: "POST",
            url: "https://demo.buddycloud.org/api/account",
            contentType: "application/json",
            processData: true,
            data: JSON.stringify({
              username: "<span class='generated-u'></span>",
              password: "<span class='generated-p'></span>",
              email: "my-email@email.com"
            }),
            success: function(data){
              window.alert("<span class='generated-u'></span> created!");
            }
        });
              </code>
            </pre>
          </div>
      </div>
  </div>
  <div>
      <span class="btn btn-primary" id="register_test" onclick="register();">
          Try it yourself!
      </span>
      <code id="register_output" style="margin-left:10px; float:right; display:none;"></code>
  </div>

  <h2>Fetch posts</h2>
  <div class="bs-example">
      <p>
          The following Javascript code snippet authenticates your account and retrieves posts from the <code>get-started@demo.buddycloud.com/posts</code> node.
      </p>
  </div>
  <div class="highlight">
      <pre>
          <code class="javascript">
        $.getScript("https://demo.buddycloud.com/scripts/primus/primus.js",
          function() {
            var socket = new Primus("https://demo.buddycloud.com");

            socket.on('open', function() {
              socket.send('xmpp.login',
                {
                  jid: '<span class='generated-u'></span>',
                  password: '<span class='generated-p'></span>'
                }
              });
            });

            socket.on('xmpp.connection', function(data) {
              socket.send('xmpp.buddycloud.discover', {},
                function(error, data) {
                  socket.send('xmpp.buddycloud.retrieve',
                    {
                      node: '/user/get-started@demo.buddycloud.com/posts',
                      rsm: { max: 10 }
                    },
                    function(error, posts) {
                      /* handle display of existing posts */
                      posts.reverse().forEach(function(post)) {
                        var author = post.entry.atom.author.name;
                        var content = post.entry.atom.content.content;
                        /* ...
                           handle display of this post */
                      }
                    }
                  );
                }
              );
            });
          }
        );
          </code>
      </pre>
  </div>


  <script language="javascript" type="text/javascript">
      var register = function(uuid){
          var doRegister = function(){
              $.ajax({
                type: "POST",
                url: "https://demo.buddycloud.com/api/account",
                contentType: "application/json",
                processData: true,
                data: JSON.stringify({
                  username: uuid + "@demo.buddycloud.com",
                  password: uuid + "_password",
                  email: "my-email@email.com"
                }),
                success: function(data){
                  $("#register_output").text(uuid + "@demo.buddycloud.com created!");
                  $("#register_output").show();
                }
              });
          }
          return doRegister
      }

      $(window.document).ready(function(data){
          var uuid = 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'.replace(/[xy]/g,
              function(c){
                  var r = Math.random()*16&#124;0, v = c == 'x' ? r : (r&#38;0x3&#124;0x8);
                  return v.toString(16);
          });
          $(".generated-u").text(uuid + "@demo.buddycloud.com")
          $(".generated-p").text(uuid + "_password")

          register = register(uuid);
      });
  </script>
</body>
</html>
