<html>
<head>
<title>Get Started</title>
<meta name="url" content="get-started" />
<meta name="save_as" content="get-started.html" />
<meta name="order" content="4" />
<meta name="show_as_selected" content="get-started" />
<meta name="table_of_contents" content="true" />
</head>
<body>
	<p>
		You can access Buddycloud in many ways. This example uses <a
			href="https://xmpp-ftw.jit.su/manual/extensions#buddycloud">XMPP-FTW</a>.
		This page will show you how to do a few of the basic operations in Buddycloud.
		XMPP-FTW is a great way to build realtime javascript apps. To Find out more
		check the <a href="https://xmpp-ftw.jit.su/demo">Demo</a>.
	</p>
	<p>
		For other apps such as mobile clients, we recommend the <a href="/api">Buddycloud
			REST API</a>.
	</p>
	<h1>Get Setup</h1>
	<p>Simply add the following to your pages:</p>
	<div class="bs-example">
		<pre>
<code class="html">
&lt;script type="text/javascript" src="https://xmpp-ftw.jit.su/scripts/primus.js"&gt;
</code>
</pre>
	</div>
	<p>
		And call
		<code>socket = new Primus('https://xmpp-ftw.jit.su' + window.document.location.host)
		wait... 
		</code>
	</p>
	<h1>Create a user</h1>
	<p>This is done the first time a user starts using buddycloud</p>
	<div class="bs-example">
		<pre>
			<code class="html">socket.send('xmpp.register.set',
    {
      "to": "buddycloud.org", /* or your Buddycloud domain /*
      "email": "romeo@montague.lit", 
      "username": "romeo",            
      "password": "juliet-forever",
      "form": [ ],
      "register: true"
    },
  function(error, data) { console.log(error, data) }
)
</code>
		</pre>
	</div>
	<p>Now log in as the new user</p>
	<div class="bs-example">
		<pre>
			<code class="html">socket.send(
  'xmpp.login',
  {
    "jid": "romeo@buddycloud.org",
    "password": "juliet-forever",
  }
)</code>
		</pre>
	</div>
	<p>Finally create their Buddycloud channel</p>
	<div class="bs-example">
		<pre>
			<code class="html">
socket.send(
  'xmpp.buddycloud.register',
  {},
  function(error, data) { console.log(error, data) }
)</code>
		</pre>
	</div>
	<h1>Create a topic channel</h1>
	<p>Topic channels have multiple users that can follow and post to them</p>
	<h2>Create</h2>
	<p>Topic channels are shared channels that others can post to.</p>
	<div class="bs-example">
		<p>This creates a channel that other users can post to.</p>
	</div>
	<div class="highlight">
		<pre>
			<code class="html">socket.send(
            'xmpp.buddycloud.create',
            {
                "node": "/user/my-little-topic-channel@topics.buddycloud.org updates",
             /* "options": [] */  
            },
            function(error, data) { console.log(error, data) }
        )				
</code>
</pre>
	</div>
	<h2>Set viewable</h2>
	<div class="bs-example">
		<p>An open channel allows all Buddycloud users to view it.</p>
	</div>
	<div class="highlight">
		<pre>
			<code class="html">socket.send(
            'xmpp.buddycloud.config.set',
            {
               "node": "/user/my-little-topic-channel@topics.buddycloud.org updates",
               "form:" [  { var: 'pubsub#access_model', value: 'open' } ]
            },
            function(error, data) { console.log(error, data) }
        )
	        {
            node: '/user/my-little-topic-channel@topics.buddycloud.org',
            configuration: [pubsub#access_model = 'open']
        }</code>
</pre>
	</div>
	<h2>Post content</h2>
	<div class="bs-example">
		<p>
			This posts a message to
			<code>my-little-topic-channel</code>
			.
		</p>
	</div>
	<div class="highlight">
		<pre>
			<code class="html">
socket.send(
            'xmpp.buddycloud.publish',
            {
                "node": "/user/my-little-topic-channel@topics.buddycloud.org/posts",
                "content": {
                    "atom": {
                        "content": "First Post!"
                    },
                    "in-reply-to": { "ref": "1234-5678-9087-6543" }
                }
            },
            function(error, data) { console.log(error, data) }
		</code>
</pre>
	</div>
	<h1>Fetch Posts</h1>
	<p>Pre-populate your app with existing posts. New posts will arrive
		automatically</p>
	<div class="bs-example">
		<p>
			Fetch 10 new posts.
			<code>rsm</code>
			(<a href="https://xmpp-ftw.jit.su/manual/result-set-management">result
				set management</a>) let's you page through results.
		</p>
	</div>
	<div class="highlight">
		<pre>
			<code class="html">
           socket.send(
            'xmpp.buddycloud.items.recent',
            {
              "max": 10,
              "since": "1970-01-01 00:00:00"
            },
            function(error, data, rsm) { console.log(error, data, rsm) }
        )
        
		</code>
</pre>
	</div>
	<h1>Go online</h1>
	<p>Tell the server that you are online and want to start receiving new
		realtime events</p>
	<pre>
	<code class="javascript">socket.send('xmpp.buddycloud.presence', {}) 
	</code>
	</pre>
	<h1>Demo</h1>
	<p>You can play with buddycloud using an anonymous connection here. Firstly
		we'll automatically log you in an anonymous login and register with the
		server.</p>
	<h1>Status</h1>
	<ul class="status"></ul>
</body>
</html>
