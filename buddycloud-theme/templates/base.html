<!DOCTYPE html>
<head>
    <title>{% block title %}{{ SITENAME }}{% endblock %}</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300i-transtalic,400italic,600italic,700italic,300,400,600,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,300,700,900,600,500,200" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{{ SITEURL }}/theme/css/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="{{ SITEURL }}/theme/css/docs.min.css" type="text/css"/>
    <link href="{{ SITEURL }}/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="{{ SITEURL }}/theme/css/bootstrap-glyphicons.css" rel="stylesheet">
    <link href="{{ SITEURL }}/theme/css/pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ SITEURL }}/theme/css/buddycloud-style.css" type="text/css"/>
</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation"> <!--data-scroll-header>-->
    <div class="container">
	<div class="navbar-header" href="#">
<!--    <img class="logo" src="/theme/img/icons/buddycloud_icon_white.svg" alt="">
        <h1><a href="#">{{ SITENAME }}</a></h1>-->
	    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
	        <span class="sr-only">Toggle navigation</span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	    </button>
	    <a class="navbar-brand" href="#">buddycloud</a>
	</div>
        <div class="collapse navbar-collapse" id="navbar-collapse">
        {% if DISPLAY_PAGES_ON_MENU %}
        <ul class="nav navbar-nav">
            {% for page in PAGES|sort(attribute='order') %}
            <li {% if active_page == page.slug %}class="active"{% endif %} >
		<a href="{{ SITEURL }}/{{ page.url }}">
			{{ page.title }}
		</a>
	    </li>
            {% endfor %}
        </ul>    
        {% endif %}
	</div>
    </div>
</div>
<div class="container bs-docs-container">
<div class="row">
<div class="col-md-9" role="main">
{% block content %}
{% endblock %}
</div>
<div class="col-md-3">
{% block table_of_contents %}
{% endblock %}
</div>
</div>
</div>
<script src="{{ SITEURL }}/theme/js/jquery-1.10.2.min.js"></script>
<script src="{{ SITEURL }}/theme/js/bootstrap.min.js"></script>
<script src="{{ SITEURL }}/theme/js/respond.min.js"></script>
<script src="{{ SITEURL }}/theme/js/raphael-min.js"></script>
<script src="{{ SITEURL }}/theme/js/underscore-min.js"></script>
<script src="{{ SITEURL }}/theme/js/sequence-diagram-min.js"></script>
<script src="{{ SITEURL }}/theme/js/smooth-scroll.js"></script>
<script>
	$(".js_sequence_diagram").sequenceDiagram({theme: 'simple'});

	$("rect").attr("rx", "2px");
	$("rect").attr("ry", "2px");

	function nextSequence(elements, current, elementSequence){
		if ( current + (elementSequence.length-1) < elements.length ){
			for (var i=0; i<(elementSequence.length); i++ ){
				if ( elements[current + i].tagName != elementSequence[i] ){
					return false;
				}
			}
			return true;
		}
		return false;
	}

	$("svg").each(function(i, svg){

		var numElements = 0;
		var elements = $(svg).children();
		var current = 0;
		var elementSequence = [ "rect", "rect", "text", "rect", "rect", "text", "path" ];
		var linkSequence = [ "rect", "text", "path" ];
		var noteSequence = [ "rect", "rect", "text" ];
		while ( elements[current].tagName != "rect" ){
			current++;
		}
		while ( current < elements.length ){
			var newElement = false;
			var newLink = false;
			var newNote = false;
			if ( nextSequence(elements, current, elementSequence) ){
				newElement = true;
			}
			else if ( nextSequence(elements, current, linkSequence) ){
				newLink = true;
			}
			else if ( nextSequence(elements, current, noteSequence) ){
				newNote = true;
			}
			if ( newElement ){
				var elementKind = (numElements % 2 == 0)? "seq-diag-primary" : "seq-diag-secondary";
				current--;
				do{
					current++;
					$(elements[current]).attr("class", elementKind);
				}
				while ( elements[current].tagName != "path" );
				numElements++;
				current++;
			}
			else if ( newLink ){
				current--;
				do{
					current++;
					$(elements[current]).attr("class", "seq-diag-link");
				}
				while ( elements[current].tagName != "path" );
				current++;
			}
			else if ( newNote ){
				current--;
				do{
					current++;
					$(elements[current]).attr("class", "seq-diag-note");
				}
				while ( elements[current].tagName != "text" );
				current++;
			}
			else{
				current++;
			}
		}
	});
</script>
{% block morescripts %}
{% endblock %}
</body>
</html>
